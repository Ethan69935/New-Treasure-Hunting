<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æµ‹è¯•æ¸¸æˆæ•°æ®ä¿å­˜</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f0f0f0;
        }
        .container {
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        button {
            padding: 10px 20px;
            margin: 5px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        button:hover {
            background-color: #45a049;
        }
        .data {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
            white-space: pre-wrap;
            font-family: monospace;
        }
        .section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ® æ¸¸æˆæ•°æ®ä¿å­˜æµ‹è¯•</h1>
        
        <div class="section">
            <h2>ğŸ“Š å½“å‰æ¸¸æˆæ•°æ®</h2>
            <div class="data" id="currentData">åŠ è½½ä¸­...</div>
        </div>
        
        <div class="section">
            <h2>ğŸ”§ æµ‹è¯•æ“ä½œ</h2>
            <button onclick="loadGameData()">åŠ è½½æ¸¸æˆæ•°æ®</button>
            <button onclick="saveTestData()">ä¿å­˜æµ‹è¯•æ•°æ®</button>
            <button onclick="clearGameData()">æ¸…é™¤æ¸¸æˆæ•°æ®</button>
            <button onclick="testGameData()">è¿è¡Œå®Œæ•´æµ‹è¯•</button>
        </div>
        
        <div class="section">
            <h2>ğŸ“ æµ‹è¯•æ—¥å¿—</h2>
            <div class="data" id="testLog"></div>
        </div>
        
        <div class="section">
            <h2>ğŸ”— æ¸¸æˆé“¾æ¥</h2>
            <ul>
                <li><a href="index.html" target="_blank">ä¸»æ¸¸æˆ</a></li>
                <li><a href="panorama.html" target="_blank">å…¨æ™¯é¡µé¢</a></li>
            </ul>
        </div>
    </div>

    <script>
        function log(message) {
            const logElement = document.getElementById('testLog');
            logElement.innerHTML += new Date().toLocaleTimeString() + ': ' + message + '\n';
            logElement.scrollTop = logElement.scrollHeight;
        }
        
        function loadGameData() {
            const savedData = localStorage.getItem('treasureHuntGame');
            const dataElement = document.getElementById('currentData');
            if (savedData) {
                const gameData = JSON.parse(savedData);
                dataElement.textContent = JSON.stringify(gameData, null, 2);
                log('âœ“ æˆåŠŸåŠ è½½æ¸¸æˆæ•°æ®');
            } else {
                dataElement.textContent = 'æ²¡æœ‰ä¿å­˜çš„æ¸¸æˆæ•°æ®';
                log('âš ï¸  æ²¡æœ‰æ‰¾åˆ°ä¿å­˜çš„æ¸¸æˆæ•°æ®');
            }
        }
        
        function saveTestData() {
            const testData = {
                gold: 250,
                helpers: 3,
                lostHelpers: 1,
                clues: 2,
                currentLocation: 'forest',
                phase: 'è¿›è¡Œä¸­',
                status: 'ç©¿è¶Šæ£®æ—',
                isPlaying: true,
                unlockedScenes: ['library', 'guild', 'forest'],
                completedScenes: ['library', 'guild'],
                gameOver: false,
                gameResult: null
            };
            localStorage.setItem('treasureHuntGame', JSON.stringify(testData));
            log('âœ“ æˆåŠŸä¿å­˜æµ‹è¯•æ•°æ®');
            loadGameData();
        }
        
        function clearGameData() {
            localStorage.removeItem('treasureHuntGame');
            log('âœ“ æˆåŠŸæ¸…é™¤æ¸¸æˆæ•°æ®');
            loadGameData();
        }
        
        function testGameData() {
            log('ğŸ”„ å¼€å§‹å®Œæ•´æµ‹è¯•...');
            
            // æµ‹è¯•1: æ¸…é™¤ç°æœ‰æ•°æ®
            clearGameData();
            
            // æµ‹è¯•2: ä¿å­˜æµ‹è¯•æ•°æ®
            setTimeout(() => {
                saveTestData();
            }, 500);
            
            // æµ‹è¯•3: é‡æ–°åŠ è½½æ•°æ®
            setTimeout(() => {
                const savedData = localStorage.getItem('treasureHuntGame');
                if (savedData) {
                    const gameData = JSON.parse(savedData);
                    if (gameData.gold === 250 && gameData.helpers === 3) {
                        log('âœ… æµ‹è¯•é€šè¿‡ï¼šæ•°æ®ä¿å­˜å’ŒåŠ è½½æ­£å¸¸å·¥ä½œï¼');
                    } else {
                        log('âŒ æµ‹è¯•å¤±è´¥ï¼šä¿å­˜çš„æ•°æ®ä¸é¢„æœŸä¸ç¬¦');
                    }
                } else {
                    log('âŒ æµ‹è¯•å¤±è´¥ï¼šæ— æ³•é‡æ–°åŠ è½½ä¿å­˜çš„æ•°æ®');
                }
            }, 1000);
        }
        
        // é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨åŠ è½½æ¸¸æˆæ•°æ®
        window.addEventListener('load', () => {
            loadGameData();
            log('é¡µé¢å·²åŠ è½½ï¼Œå¼€å§‹æµ‹è¯•...');
        });
    </script>
</body>
</html>